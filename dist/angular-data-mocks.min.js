/**
* @author Jason Dobry <jason.dobry@gmail.com>
* @file angular-data-mocks.min.js
* @version 0.5.3 - Homepage <https://github.com/jmdobry/angular-data-mocks>
* @copyright (c) 2014 Jason Dobry <https://github.com/jmdobry/>
* @license MIT <https://github.com/jmdobry/angular-data-mocks/blob/master/LICENSE>
*
* @overview A mock of angular-data for testing purposes.
*/
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(){var a=[],b=[],c=[],d=[],e={},f=["create","DEL","destroy","destroyAll","find","findAll","GET","HTTP","POST","PUT","update","updateAll"];this.$get=["DSMockUtils",function(g){var h=g.MockDSAdapterExpectation,i={};angular.forEach(f,function(f){e[f]=g.mockAsync(f,"DSHttpAdapter",a,b,c,d),sinon.spy(e,f)}),this.defaults={};var j={defaults:i,expect:function(b){var c=Array.prototype.slice.call(arguments,1);if(void 0===c[0])throw new Error("Resource not defined for expectation!");var d=new h(b,c);return a.push(d),{respond:function(){d.response=Array.prototype.slice.call(arguments)}}},flush:function(a){if(!d.length)throw new Error("No pending DSHttpAdapter requests to flush !");if(angular.isDefined(a))for(;a--;){if(!d.length)throw new Error("No more pending DSHttpAdapter requests to flush !");d.shift()()}else for(;d.length;)d.shift()();$rootScope.$digest()},when:function(a){var c=Array.prototype.slice.call(arguments,1);if(void 0===c[0])throw new Error("Resource not defined for definition");var d=new h(a,c);return b.push(d),{respond:function(){d.response=Array.prototype.slice.call(arguments)}}},verifyNoOutstandingExpectation:function(){if($rootScope.$digest(),a.length)throw new Error("Unsatisfied requests: "+a.join(", "))}};return angular.forEach(f,function(b){j["expect"+b[0].toUpperCase()+b.substring(1)]=g.createShortMethod(b,a)}),angular.extend(j,e),j}]}b.exports=c},{}],2:[function(a,b){function c(){var a=[],b=[],c=[],d=[],e={},f=["create","destroy","find","update"];this.$get=["DSMockUtils",function(g){var h=g.MockDSAdapterExpectation,i={};angular.forEach(f,function(f){e[f]=g.mockAsync(f,"DSLocalStorageAdapter",a,b,c,d),sinon.spy(e,f)}),this.defaults={};var j={defaults:i,expect:function(b){var c=Array.prototype.slice.call(arguments,1);if(void 0===c[0])throw new Error("Resource not defined for expectation!");var d=new h(b,c);return a.push(d),{respond:function(){d.response=Array.prototype.slice.call(arguments)}}},flush:function(a){if(!d.length)throw new Error("No pending DSLocalStorageAdapter requests to flush !");if(angular.isDefined(a))for(;a--;){if(!d.length)throw new Error("No more pending DSLocalStorageAdapter requests to flush !");d.shift()()}else for(;d.length;)d.shift()();$rootScope.$digest()},when:function(a){var c=Array.prototype.slice.call(arguments,1);if(void 0===c[0])throw new Error("Resource not defined for definition");var d=new h(a,c);return b.push(d),{respond:function(){d.response=Array.prototype.slice.call(arguments)}}},verifyNoOutstandingExpectation:function(){if($rootScope.$digest(),a.length)throw new Error("Unsatisfied requests: "+a.join(", "))}};return angular.forEach(f,function(b){j["expect"+b[0].toUpperCase()+b.substring(1)]=g.createShortMethod(b,a)}),angular.extend(j,e),j}]}b.exports=c},{}],3:[function(require,module,exports){function DSProvider(){function Resource(a,b){a.deepMixIn(this,b),this.endpoint="endpoint"in b?b.endpoint:this.name}var expectations=[],definitions=[],requests=[],responses=[],stubs={},asyncMethods=["create","destroy","destroyAll","find","findAll","loadRelations","refresh","save","update","updateAll"],syncMethods=["bindAll","bindOne","changes","defineResource","createInstance","digest","eject","ejectAll","filter","get","hasChanges","inject","lastModified","lastSaved","previous"],methodsToProxy=["bindAll","bindOne","create","createInstance","destroy","destroyAll","filter","find","findAll","get","hasChanges","inject","lastModified","lastSaved","loadRelations","previous","refresh","save","update","updateAll"];this.$get=["DSMockUtils","DSUtils","DSErrors","$log",function(DSMockUtils,DSUtils,DSErrors,$log){var MockDSExpectation=DSMockUtils.MockDSExpectation,defaults={deserialize:function(a,b){return b.data?b.data:b}};angular.forEach(asyncMethods,function(a){stubs[a]=DSMockUtils.mockAsync(a,"DS",expectations,definitions,requests,responses),sinon.spy(stubs,a)}),angular.forEach(syncMethods,function(a){stubs[a]=sinon.stub()}),this.defaults=defaults;var DS={store:{},definitions:{},defaults:defaults,expect:function(a){var b=Array.prototype.slice.call(arguments,1);if(void 0===b[0])throw new Error("Resource not defined for expectation!");var c=new MockDSExpectation(a,b);return expectations.push(c),{respond:function(){c.response=Array.prototype.slice.call(arguments)}}},flush:function(a){if(!responses.length)throw new Error("No pending DS requests to flush !");if(angular.isDefined(a))for(;a--;){if(!responses.length)throw new Error("No more pending DS requests to flush !");responses.shift()()}else for(;responses.length;)responses.shift()();$rootScope.$digest()},when:function(a){var b=Array.prototype.slice.call(arguments,1);if(void 0===b[0])throw new Error("Resource not defined for definition");var c=new MockDSExpectation(a,b);return definitions.push(c),{respond:function(){c.response=Array.prototype.slice.call(arguments)}}},verifyNoOutstandingExpectation:function(){if($rootScope.$digest(),expectations.length)throw new Error("Unsatisfied requests: "+expectations.join(", "))},utils:DSUtils,errors:DSErrors};return angular.forEach(asyncMethods,function(a){DS["expect"+a[0].toUpperCase()+a.substring(1)]=DSMockUtils.createShortMethod(a,expectations)}),angular.extend(DS,stubs),DS.defineResource=function(definition){var DS=this;DSUtils.isString(definition)&&(definition=definition.replace(/\s/gi,""),definition={name:definition});try{Resource.prototype=DS.defaults,DS.definitions[definition.name]=new Resource(DSUtils,definition);var def=DS.definitions[definition.name];return def.class=definition.name[0].toUpperCase()+definition.name.substring(1),eval("function "+def.class+"() {}"),def[def.class]=eval(def.class),def.methods&&DSUtils.deepMixIn(def[def.class].prototype,def.methods),DS.store[def.name]={collection:[],completedQueries:{},pendingQueries:{},index:{},modified:{},saved:{},previousAttributes:{},observers:{},collectionModified:0},angular.forEach(methodsToProxy,function(a){def[a]="bindOne"===a||"bindAll"===a?function(){var b=Array.prototype.slice.call(arguments);return b.splice(2,0,def.name),DS[a].apply(DS,b)}:function(){var b=Array.prototype.slice.call(arguments);return b.unshift(def.name),DS[a].apply(DS,b)}}),def}catch(err){throw $log.error(err),delete this.definitions[definition.name],delete this.store[definition.name],err}},sinon.spy(DS,"defineResource"),DS}]}module.exports=DSProvider},{}],4:[function(a){!function(b,c,d){"use strict";function e(a){return c.isString(a)||c.isFunction(a)?a:c.toJson(a)}function f(a,b,c){return function(){c[0]instanceof Error?b.reject.apply(null,c):b.resolve.apply(null,c)}}function g(a,b,c,d,g,h){return function(){var g=Array.prototype.slice.call(arguments),i=c[0],j=$q.defer(),k=g[0];if(i&&i.match(a,k)){if(c.shift(),!i.matchArgs(g))throw new Error("Expected "+i+" with different args\nEXPECTED: "+e(i.args)+"\nGOT:      "+e(g));if(i.response)return h.push(f(k,j,i.response)),j.promise;throw new Error("No response defined for "+b+"."+i.method)}for(var l=0;l<d.length;l++){var m=d[l];if(m.match(a,k)){if(m.response)return h.push(f(k,j,m.response)),j.promise;throw new Error("No response defined !")}}throw new Error("Unexpected request: "+b+"."+a+" "+k+"\nNo more requests expected")}}function h(a,b){return function(){var c=Array.prototype.slice.call(arguments);if(c[0]===d)throw new Error("Resource not defined for expectation!");var e=new i(a,c);return b.push(e),{respond:function(){e.response=Array.prototype.slice.call(arguments)}}}}function i(a,b){this.method=a,this.args=b,this.resourceName=this.args[0],this.match=function(b,c){return a!==b?!1:this.resourceName!==c?!1:!0},this.matchArgs=function(a){if(0===this.args.length)return!0;for(var b=!1,d=0;d<this.args.length&&(b=c.equals(this.args[d],a[d]),b);d++);return b}}function j(a,b){this.method=a,this.args=b,this.match=function(b){return a===b},this.matchArgs=function(a){if(0===this.args.length)return!0;for(var b=!1,d=0;d<this.args.length&&(b=c.equals(this.args[d],a[d]),b);d++);return b}}c.module("angular-data.mock-utils",["angular-data.DS","ng"]).service("DSMockUtils",[function(){return{prettyPrint:e,createResponse:f,mockAsync:g,createShortMethod:h,MockDSExpectation:i,MockDSAdapterExpectation:j}}]),c.module("angular-data.DSMock",["angular-data.mock-utils"]).provider("DS",a("./DSMock.js")),c.module("angular-data.DSHttpAdapterMock",["angular-data.mock-utils"]).provider("DSHttpAdapter",a("./DSHttpAdapterMock.js")),c.module("angular-data.DSLocalStorageAdapterMock",["angular-data.mock-utils"]).provider("DSLocalStorageAdapter",a("./DSLocalStorageAdapterMock.js")),c.module("angular-data.mocks",["angular-data.DSMock","angular-data.DSHttpAdapterMock","angular-data.DSLocalStorageAdapterMock"]).value("version","0.5.3")}(window,window.angular)},{"./DSHttpAdapterMock.js":1,"./DSLocalStorageAdapterMock.js":2,"./DSMock.js":3}]},{},[4]);