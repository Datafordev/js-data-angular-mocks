/**
* @author Jason Dobry <jason.dobry@gmail.com>
* @file angular-data-mocks.min.js
* @version 0.3.1 - Homepage <https://github.com/jmdobry/angular-data-mocks>
* @copyright (c) 2014 Jason Dobry <https://github.com/jmdobry/>
* @license MIT <https://github.com/jmdobry/angular-data-mocks/blob/master/LICENSE>
*
* @overview A mock of angular-data for testing purposes.
*/
!function(a,b,c){"use strict";function d(a){return b.isString(a)||b.isFunction(a)?a:b.toJson(a)}function e(a,c,d,e){return function(){var f=Array.prototype.slice.call(arguments),g=!1;if(b.forEach(d,function(b){b.method===a&&(g=!0)}),!g)throw new Error("Unexpected "+c+" call: "+a+" "+f[0]);var h=$q.defer();return e.push({method:a,args:f,deferred:h}),h.promise}}function f(a,b){return function(){var d=Array.prototype.slice.call(arguments);if(d[0]===c)throw new Error("Resource not defined for expectation!");var e=new g(a,d);return b.push(e),{respond:function(){e.response=Array.prototype.slice.call(arguments)}}}}function g(a,c){this.method=a,this.args=c,this.resourceName=this.args[0],this.match=function(c,d){return a!==c?!1:!(b.isDefined(d)&&!this.matchArgs(d))},this.matchArgs=function(a){if(0===this.args.length)return!0;for(var c=!1,d=0;d<this.args.length&&(c=b.equals(this.args[d],a[d]),c);d++);return c}}function h(a,c){var d=c.response;if(!b.isDefined(d))throw new Error("Response not defined for DS."+c.method);d[0]instanceof Error?a.deferred.reject.apply(null,d):a.deferred.resolve.apply(null,d)}function i(a,b){var c=b.shift(),e=a.shift();if(!e)throw new Error("Unexpected request: DS."+c.method+" "+c.args[0]+"\nNo more requests expected");if(!e.match(c.method,c.args))throw new Error("Expected DS."+e.method+" call doesn't match request\nEXPECTED: "+d(e.args)+"\nGOT:      "+d(c.args));h(c,e)}function j(){var a=[],d=[],h={},j=["create","DEL","destroy","destroyAll","find","findAll","GET","HTTP","POST","PUT","update","updateAll"];b.forEach(j,function(b){h[b]=e(b,"DSHttpAdapter",a,d),sinon.spy(h,b)}),this.$get=function(){var e={expect:function(b){var d=Array.prototype.slice.call(arguments,1);if(d[0]===c)throw new Error("Resource not defined for expectation!");var e=new g(b,d);return a.push(e),{respond:function(){e.response=Array.prototype.slice.call(arguments)}}},flush:function(c){if(!d.length)throw new Error("No pending DS requests to flush !");if(b.isDefined(c))for(;c--;){if(!d.length)throw new Error("No more pending DS requests to flush !");i(a,d)}else for(;d.length;)i(a,d);$rootScope.$digest()},verifyNoOutstandingExpectation:function(){if($rootScope.$digest(),a.length)throw new Error("Unsatisfied requests: "+a.join(", "))}};return b.forEach(j,function(b){DS["expect"+b[0].toUpperCase()+b.substring(1)]=f(b,a)}),b.extend(e,h),e}}function k(){var a=[],d=[],h={},j=["create","destroy","destroyAll","find","findAll","refresh","save","update","updateAll"],k=["bindOne","bindAll","changes","defineResource","digest","eject","ejectAll","filter","get","hasChanges","inject","lastModified","lastSaved","previous"];b.forEach(j,function(b){h[b]=e(b,"DS",a,d),sinon.spy(h,b)}),b.forEach(k,function(a){h[a]=sinon.spy()}),this.$get=function(){var e={expect:function(b){var d=Array.prototype.slice.call(arguments,1);if(d[0]===c)throw new Error("Resource not defined for expectation!");var e=new g(b,d);return a.push(e),{respond:function(){e.response=Array.prototype.slice.call(arguments)}}},flush:function(c){if(!d.length)throw new Error("No pending DS requests to flush !");if(b.isDefined(c))for(;c--;){if(!d.length)throw new Error("No more pending DS requests to flush !");i(a,d)}else for(;d.length;)i(a,d);$rootScope.$digest()},verifyNoOutstandingExpectation:function(){if($rootScope.$digest(),a.length)throw new Error("Unsatisfied requests: "+a.join(", "))},utils:l,errors:m};return b.forEach(j,function(b){e["expect"+b[0].toUpperCase()+b.substring(1)]=f(b,a)}),b.extend(e,h),e}}var l=b.injector(["angular-data.DS"]).get("DSUtils"),m=b.injector(["angular-data.DS"]).get("DSErrors");b.module("angular-data.mocks",["ng"]).provider("DSHttpAdapter",j).provider("DS",k)}(window,window.angular);